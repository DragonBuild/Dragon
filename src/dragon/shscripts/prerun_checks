#!/usr/bin/env bash

check()
{
    # Linux has a separate toolchain
    # iOS has to install the toolchain and replace the pip ninja with a ported ninja
    # MacOS has XCode and just needs ldid:
    packagesNeeded=""
    if ! [[ -x $(command -v ldid) ]]; then
        packagesNeeded+="ldid"
    fi

    if [[ -z "$packagesNeeded" ]]; then
        return
    fi

    if [[ -x "$(command -v port)" ]];   then sudo port install $packagesNeeded
    elif [[ -x "$(command -v brew)" ]];    then brew install $packagesNeeded
    # elif [[ -x "$(command -v yum)" ]];    then yum install $packagesNeeded
    # elif [[ -x "$(command -v apk)" ]];    then sudo apk add --no-cache $packagesNeeded
    # elif [[ -x "$(command -v apt-get)" ]];    then sudo apt-get install $packagesNeeded
    # elif [[ -x "$(command -v dnf)" ]];    then sudo dnf install $packagesNeeded
    # elif [[ -x "$(command -v zypper)" ]]; then sudo zypper install $packagesNeeded
    else echo "ERROR: $packagesNeeded could not be found and must be installed manually.">&2; drexit 1; fi
}

check